INTEGRANTES:

ANTONIO CARLOS NETO 		11611BCC054
HIGOR EMANUEL SOUZA SILVA 	11611BCC016
MARCELO MENDONÇA BORGES 	11611BCC020

-------------------------------------------EXEMPLO 1-------------------------------------------------------

ENTRADA: INSERT INTO TESTE1 (atributo11, atributo12) VALUES (1, 'David');
SAÍDA: INSERT 0 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: BEGIN;
SAÍDA: BEGIN

-----------------------------------------------------------------------------------------------------------

ENTRADA: UPDATE TESTE1 SET atributo12 = 'Dave' WHERE atributo11 = 1;
SAÍDA: UPDATE 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT atributo12 FROM TESTE1 WHERE atributo11 = 1;
SAÍDA: 

atributo12
-------------
Dave
(1 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: ROLLBACK;
SAÍDA: ROLLBACK;

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT atributo12 FROM TESTE1 WHERE atributo11 = 1;
SAÍDA: 

atributo12
-------------
David
(1 registro)

-----------------------------------------------------------------------------------------------------------
------------------------------------------------EXEMPLO 2--------------------------------------------------

ENTRADA: DELETE FROM TESTE1;
SAÍDA: DELETE 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: DELETE FROM TESTE2;
SAÍDA: DELETE 0

-----------------------------------------------------------------------------------------------------------

ENTRADA: INSERT INTO TESTE1 (atributo11, atributo12) VALUES (1, 'David');
SAÍDA: INSERT 0 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: BEGIN;
SAÍDA: BEGIN

-----------------------------------------------------------------------------------------------------------

ENTRADA: INSERT INTO TESTE2 (atributo21, atributo22) VALUES (2, 'Arthur');
SAÍDA: INSERT 0 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: UPDATE TESTE1 SET atributo12 = 'Robert' WHERE atributo11 = 1;
SAÍDA: UPDATE 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE1
SAÍDA: 

atributo11     |     atributo12
---------------+---------------
	1      |	Robert
(1 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: ROLLBACK;
SAÍDA: ROLLBACK

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE1;
SAÍDA: 

atributo11	|	atributo12
----------------+-----------------
	1	|	David
(1 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE2;
SAÍDA: 

atributo21 	|	atributo22
----------------+-----------------
(0 registro)

-----------------------------------------------------------------------------------------------------------
------------------------------------------------EXEMPLO 3--------------------------------------------------

ENTRADA: DELETE FROM TESTE1;
SAÍDA: DELETE 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: DELETE FROM TESTE2;
SAÍDA: DELETE 0

-----------------------------------------------------------------------------------------------------------

ENTRADA: INSERT INTO TESTE1 (atributo11, atributo12) VALUES (1, 'David');
SAÍDA: INSERT 0 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: BEGIN;
SAÍDA: BEGIN

-----------------------------------------------------------------------------------------------------------

ENTRADA: INSERT INTO TESTE2 (atributo21, atributo22) VALUES (2, 'Arthur');
SAÍDA: INSERT 0 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: SAVEPOINT FIRST;
SAÍDA: SAVEPOINT

-----------------------------------------------------------------------------------------------------------

ENTRADA: UPDATE TESTE1 SET atributo12 = 'Robert' WHERE atributo11 = 1;
SAÍDA: UPDATE 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE1;
SAÍDA: 

atributo11	|	atributo12
----------------+---------------
	1	|	Robert
(1 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: ROLLBACK TO FIRST;
SAÍDA: ROLLBACK

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE1;
SAÍDA: 

atributo11 	|	atributo12
----------------+-----------------
	1	|	David
(1 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE2;
SAÍDA:

atributo21	|	atributo22
----------------+-----------------
	2	|	ARTHUR
(1 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: ROLLBACK;
SAÍDA: ROLLBACK

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE1;
SAÍDA: 

atributo11	|	atributo12
----------------+-----------------
	1	|	David
(1 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE2;
SAÍDA:

atributo21	|	atributo22
----------------+-----------------
(0 registro)

-----------------------------------------------------------------------------------------------------------

ENTRADA: INSERT INTO TESTE2 (atributo21, atributo22) VALUES (9, 'Chris');
SAÍDA: INSERT 0 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: COMMIT;
SAÍDA:	WARNING: there is no transaction in progess
		COMMIT

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE2;
SAÍDA:	

atributo21	|	atributo22
----------------+------------------
	9	|	Chris
(1 registro)


-----------------------------------------------------------------------------------------------------------

ENTRADA: BEGIN;
SAÍDA: BEGIN

-----------------------------------------------------------------------------------------------------------

ENTRADA: UPDATE TESTE2 SET atributo22 = 'Gill' WHERE atributo21 = 9;
SAÍDA: UPDATE 1

-----------------------------------------------------------------------------------------------------------

ENTRADA: COMMIT;
SAÍDA: COMMIT

-----------------------------------------------------------------------------------------------------------

ENTRADA: ROLLBACK;
SAÍDA: 	WARNING: there is no transaction in progess
		ROLLBACK

-----------------------------------------------------------------------------------------------------------

ENTRADA: SELECT * FROM TESTE2;
SAÍDA:


atributo21	|	atributo22
----------------+------------------
	9	|	Gill
(1 registro)

-----------------------------------------------------------------------------------------------------------
------------------------------------------------EXEMPLO 4--------------------------------------------------

ENTRADA: 
-- no primeiro console						-- no segundo console
SET SEARCH_PATH TO LOCADORA;					SET SEARCH_PATH TO LOCADORA;
BEGIN;								BEGIN;
UPDATE CLIENTE SET
nome= 'João Gilberto'
WHERE numcliente = '1';
								UPDATE CLIENTE
								SET nome= 'Marina Lima'
								WHERE numcliente = '2';

UPDATE CLIENTE SET
nome= 'Laura Martins'
WHERE numcliente = '2';
								UPDATE CLIENTE
								SET nome= 'João Gama'
								WHERE numcliente = '1';

SAÍDA: 

ERRO: DEADLOCK DETECTED
DETALHE: PROCESS 4620  WAITS FOR SHAREDLOCK ON TRASACTION 752; BLOCKED BY PROCESS 6380.
PROCESS 6380 WAITS FOR SHAREDLOCK ON TRASACTION 753; BLOCKED BY PROCESS 4620.

DICA: SEE SERVER LOG FOR QUERY DETAILS.
CONTEXTO: WHILE UPDATING TUPLE (0,1) IN RELATION "CLIENTE"

-----------------------------------------------------------------------------------------------------------
